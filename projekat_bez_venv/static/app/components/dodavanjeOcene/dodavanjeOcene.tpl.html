<div class="row">
    <div class="col-12">
        <form ng-submit="pctrl.dodajOcenu()" name="studentForma">
            <div class="form-group">
                <label for="ime">Student:</label>
                <select name="predmet" id="predmet" ng-model="pctrl.novaOcena.student_id">
                    <option ng-repeat="p in pctrl.studenti" value="{{p.id}}">{{p.ime}}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="prezime">Zadatak:</label>
                <select name="predmet" id="predmet" ng-model="pctrl.novaOcena.zadatak_id">
                    <option ng-repeat="p in pctrl.zadaci" value="{{p.id}}">{{p.naslov}}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sadrzaj">Ocena:</label>
                <input type="number" min="5" max="10" name="sadrzaj" id="sadrzaj" class="form-control" ng-model="pctrl.novaOcena.ocena" required>
            </div>
            <div class="form-group">
                <input type="submit" value="Dodaj ocenu" class="btn btn-primary">
            </div>
        </form>
    </div>
</div>

<script>
    function provera(event) {

        let datum = document.getElementById("datum").value
        datum.slice(0, 19)
        datum.replace("T", " ");
        

        let today = new Date()

        let dd = today.getDate()
        let mm = today.getMonth() + 1
        let yyyy = today.getFullYear()
        let hh = today.getHours()
        let min = today.getMinutes()

        if (dd < 10) dd = "0" + dd
        if (mm < 10) mm = "0" + mm
        if (hh < 10) hh = "0" + hh
        if (min < 10) min = "0" + min

        let now = yyyy + "-" + mm + "-" + dd + " " + hh + ":" + min
/*
        console.log(hh)
        console.log(mm)*/

        console.log(now)
        console.log(datum)

        if (now > datum) {
            event.target.setCustomValidity("Datum nije validan!")
        } 
        else {
            datum.getHours() = datum.getHours() + 2
            event.target.setCustomValidity("");
        }
    }
</script>